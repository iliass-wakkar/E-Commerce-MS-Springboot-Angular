spring:
  application:
    name: reactivegateway
  config:
    import: optional:configserver:http://localhost:8888

server:
  port: 1111

logging:
  level:
    org.springframework.cloud.gateway: DEBUG
    feign: DEBUG

# Feign client configuration
feign:
  client:
    config:
      default:
        loggerLevel: full
        connectTimeout: 5000
        readTimeout: 5000

# Gateway JWT configuration
gateway:
  jwt:
    # Secret key loaded from environment variable JWT_SECRET
    # If not set, defaults to a dev key (ONLY FOR DEV)
    secret-key: ${JWT_SECRET:dev-secret-key-change-this-in-prod-min-256-bits-32-bytes}
    ttl-seconds: 86400 # 24 hours
    issuer: gateway-server

# Resilience4j Circuit Breaker configuration
resilience4j:
  circuitbreaker:
    configs:
      default:
        slidingWindowSize: 10
        failureRateThreshold: 50
        waitDurationInOpenState: 10000
        permittedNumberOfCallsInHalfOpenState: 3
        minimumNumberOfCalls: 5
        automaticTransitionFromOpenToHalfOpenEnabled: true
    instances:
      userService:
        baseConfig: default
  timelimiter:
    configs:
      default:
        timeoutDuration: 5s
    instances:
      userService:
        baseConfig: default
